*------------------------------------------------------------*
User:                hkatrag1
Date:                December 12, 2017
Time:                11:45:21
Site:                70117250
Platform:            X64_DSRV12
Maintenance Release: 9.04.01M3P062415
EM Version:          14.1
* 
*------------------------------------------------------------*
* Training Log
Date:                December 12, 2017
Time:                11:45:16
*------------------------------------------------------------*
10866  proc freq data=EMWS2.Trans4_VariableSet noprint;
10867  table ROLE*LEVEL/out=WORK.Trans4META;
10868  run;
 
NOTE: There were 28 observations read from the data set EMWS2.TRANS4_VARIABLESET.
NOTE: The data set WORK.TRANS4META has 5 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10869  proc print data=WORK.Trans4META label noobs;
10870  var ROLE LEVEL COUNT;
10871  label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
10872  title9 ' ';
10873  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
10874  run;
 
NOTE: There were 5 observations read from the data set WORK.TRANS4META.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10875  title10;
 
10876  data WORK.M276KAQ3;
10877  set WORK.M276KAQ3;
10878  if (METHOD='NONE' and ROLE ne 'FREQ') or (role = 'REJECTED' and METHOD = 'DEFAULT') then delete;
10879  run;
 
NOTE: There were 28 observations read from the data set WORK.M276KAQ3.
NOTE: The data set WORK.M276KAQ3 has 27 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: There were 9686 observations read from the data set BIA.PVA97NK.
NOTE: There were 9686 observations read from the data set EMWS2.IDS_DATA.
NOTE: There were 9686 observations read from the data set EMWS2.TRANS_TRAIN.
NOTE: View EMWS2.TRANS3_TRAIN.VIEW used (Total process time):
      real time           0.23 seconds
      cpu time            0.11 seconds
 
NOTE: There were 9686 observations read from the data set EMWS2.TRANS2_TRAIN.
10944  *------------------------------------------------------------*;
10945  * Trans: Computing Summary Statistics;
10946  *------------------------------------------------------------*;
10947  data WORK.M3LDEWE6;
10948  set WORK.M3LDEWE6;
10949  if (role = 'REJECTED') then role = 'INPUT';
10950  run;
 
NOTE: There were 27 observations read from the data set WORK.M3LDEWE6.
NOTE: The data set WORK.M3LDEWE6 has 27 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10951  *------------------------------------------------------------* ;
10952  * EM: DMDBClass Macro ;
10953  *------------------------------------------------------------* ;
10954  %macro DMDBClass;
10955      DemCluster(ASC) DemGender(ASC) DemHomeOwner(ASC) PCTL_GiftCntAll(ASC)
10956     PCTL_GiftTimeLast_REV(ASC) PCTL_Monetary_TotalGiftAmount(ASC)
10957     StatusCat96NK(ASC) StatusCatStarAll(ASC) TargetB(DESC)
10958  %mend DMDBClass;
10959  *------------------------------------------------------------* ;
10960  * EM: DMDBVar Macro ;
10961  *------------------------------------------------------------* ;
10962  %macro DMDBVar;
10963      DemAge DemMedHomeValue DemMedIncome DemPctVeterans GiftAvg36 GiftAvgAll
10964     GiftAvgCard36 GiftAvgLast GiftCnt36 GiftCntCard36 GiftCntCardAll GiftTimeFirst
10965     PromCnt12 PromCnt36 PromCntAll PromCntCard12 PromCntCard36 PromCntCardAll
10966  %mend DMDBVar;
10967  *------------------------------------------------------------*;
10968  * EM: Create DMDB;
10969  *------------------------------------------------------------*;
10970  proc dmdb batch data=EMWS2.Trans3_TRAIN
10971  dmdbcat=WORK.EM_DMDB
10972  classout=WORK.Transclassout
10973  maxlevel = 513
10974  ;
10975  class %DMDBClass;
10976  var %DMDBVar;
10977  target
10978  TargetB
10979  ;
10980  run;
 
NOTE: Records processed = 9686   Memory used = 511K.
NOTE: There were 9686 observations read from the data set BIA.PVA97NK.
NOTE: There were 9686 observations read from the data set EMWS2.IDS_DATA.
NOTE: There were 9686 observations read from the data set EMWS2.TRANS_TRAIN.
NOTE: View EMWS2.TRANS3_TRAIN.VIEW used (Total process time):
      real time           0.16 seconds
      cpu time            0.17 seconds
 
NOTE: There were 9686 observations read from the data set EMWS2.TRANS2_TRAIN.
NOTE: There were 9686 observations read from the data set EMWS2.TRANS3_TRAIN.
NOTE: The data set WORK.TRANSCLASSOUT has 84 observations and 9 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.18 seconds
      cpu time            0.18 seconds
 
 
10981  quit;
10982  *--- end code ---*;
 
10983  data WORK.TransINTERVALMETA;
10984  set WORK.M276KAQ3;
10985  if LEVEL ne 'INTERVAL' then delete;
10986  run;
 
NOTE: There were 27 observations read from the data set WORK.M276KAQ3.
NOTE: The data set WORK.TRANSINTERVALMETA has 18 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10987  *------------------------------------------------------------*;
10988  * Trans: Determining Variables to Scale;
10989  *------------------------------------------------------------*;
10990  data WORK.M33EN_06;
10991  set WORK.M33EN_06;
10992  where (TYPE="N" and (METHOD in("MAX_NORM", "MAX_CORR", "EQUALIZE", "OP_MAX_NORM", "OP_EQUALIZE"))) or (ROLE eq "FREQ");
10993  run;
 
NOTE: There were 0 observations read from the data set WORK.M33EN_06.
      WHERE ((TYPE='N') and METHOD in ('EQUALIZE', 'MAX_CORR', 'MAX_NORM', 'OP_EQUALIZE', 'OP_MAX_NORM')) or (ROLE='FREQ');
NOTE: The data set WORK.M33EN_06 has 0 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: View EMWS2.TRANS3_TRAIN.VIEW used (Total process time):
      real time           0.28 seconds
      cpu time            0.26 seconds
 
10996  %exploreSample(DATA=EMWS2.Trans3_TRAIN, OUTPUT=EMWS2.Trans4_SAMPLE_DATA, METADATA=EMWS2.Trans3_CMeta_TRAIN, VARS=, METHOD=FIRSTN, SIZE=DEFAULT, ALPHA=0.01, PVALUE=0.01, SEED=12345);
NOTE: Fileref X has been deassigned.
NOTE: EXPLOREOBS EMWS2.Trans3_TRAIN : vars= 33 : recl= 329 : max=20000 : def= 2000
PERFORMANCE  DETAILS
*------------------------------------------------------------*
* FirstN/Top sample
*------------------------------------------------------------*
 
NOTE: There were 9686 observations read from the data set BIA.PVA97NK.
NOTE: There were 9686 observations read from the data set EMWS2.IDS_DATA.
NOTE: There were 9686 observations read from the data set EMWS2.TRANS_TRAIN.
NOTE: View EMWS2.TRANS3_TRAIN.VIEW used (Total process time):
      real time           0.17 seconds
      cpu time            0.17 seconds
 
NOTE: There were 9686 observations read from the data set EMWS2.TRANS2_TRAIN.
NOTE: There were 2000 observations read from the data set EMWS2.TRANS3_TRAIN.
NOTE: The data set EMWS2.TRANS4_SAMPLE_DATA has 2000 observations and 33 variables.
NOTE: DATA statement used (Total process time):
      real time           0.21 seconds
      cpu time            0.18 seconds
 
 
 
*------------------------------------------------------------*
* Score Log
Date:                December 12, 2017
Time:                11:45:19
*------------------------------------------------------------*
11274  proc FCMP NOEXECUTE IMPUTEDDEPS OUTDEPS=WORK._CODEINPUT1;
11275  RFM = substr(pctl_GiftCntAll,1,2)||substr(pctl_GiftTimeLast_Rev,1,2)||substr(pctl_Monetary_TotalGiftAmount,1,2);
11276  run;
 
NOTE: Dependency structure written to data set WORK._CODEINPUT1.
NOTE: PROCEDURE FCMP used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11277  quit;
 
11278  data WORK._CODEINPUT1;
11279  length ROLE $32 LEVEL $8 REPORT $1;
11280  retain _FormulaNum 1 ROLE "INPUT" REPORT "N" LEVEL "INTERVAL";
11281  set WORK._CODEINPUT1(keep=RHS rename=(RHS=INPUTNAME));
11282  run;
 
NOTE: There were 3 observations read from the data set WORK._CODEINPUT1.
NOTE: The data set WORK._CODEINPUT1 has 3 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11283  proc sort data=WORK._CODEINPUT1 NODUPKEY;
11284  by INPUTNAME;
11285  run;
 
NOTE: There were 3 observations read from the data set WORK._CODEINPUT1.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set WORK._CODEINPUT1 has 3 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11286  proc append base=WORK.TRANS_FORMULAVARS data=WORK._CODEINPUT1;
11287  run;
 
NOTE: Appending WORK._CODEINPUT1 to WORK.TRANS_FORMULAVARS.
NOTE: BASE data set does not exist. DATA file is being copied to BASE file.
NOTE: There were 3 observations read from the data set WORK._CODEINPUT1.
NOTE: The data set WORK.TRANS_FORMULAVARS has 3 observations and 5 variables.
NOTE: PROCEDURE APPEND used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11288  data WORK.TRANS_FORMULAVARS;
11289  length UNAME $32;
11290  set WORK.TRANS_FORMULAVARS;
11291  UNAME = upcase(INPUTNAME);
11292  run;
 
NOTE: There were 3 observations read from the data set WORK.TRANS_FORMULAVARS.
NOTE: The data set WORK.TRANS_FORMULAVARS has 3 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11293  proc sort data=WORK.TRANS_FORMULAVARS;
11294  by UNAME;
11295  run;
 
NOTE: There were 3 observations read from the data set WORK.TRANS_FORMULAVARS.
NOTE: The data set WORK.TRANS_FORMULAVARS has 3 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11296  data _temp;
11297  set EMWS2.Trans4_VariableSet(keep=NAME LEVEL ROLE TYPE REPORT rename=(NAME=INPUTNAME LEVEL=INPUTLEVEL ROLE=INPUTROLE TYPE=INPUTTYPE REPORT=INPUTREPORT));
11298  length UNAME $32;
11299  UNAME = upcase(INPUTNAME);
11300  run;
 
NOTE: There were 28 observations read from the data set EMWS2.TRANS4_VARIABLESET.
NOTE: The data set WORK._TEMP has 28 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11301  proc sort data=_temp;
11302  by UNAME;
11303  run;
 
NOTE: There were 28 observations read from the data set WORK._TEMP.
NOTE: The data set WORK._TEMP has 28 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11304  data WORK.TRANS_FORMULAVARS;
11305  merge WORK.TRANS_FORMULAVARS(in=_a) _temp(in=_b);
11306  by UNAME;
11307  if _a and _b then output;
11308  run;
 
NOTE: There were 3 observations read from the data set WORK.TRANS_FORMULAVARS.
NOTE: There were 28 observations read from the data set WORK._TEMP.
NOTE: The data set WORK.TRANS_FORMULAVARS has 3 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11309  proc sort data=WORK.TRANS_FORMULAVARS;
11310  by _FormulaNum UNAME;
11311  run;
 
NOTE: There were 3 observations read from the data set WORK.TRANS_FORMULAVARS.
NOTE: The data set WORK.TRANS_FORMULAVARS has 3 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11312  data WORK.TRANS_FORMULAVARS _target(keep=_FormulaNum);
11313  length ROLE $32 REPORT $1;
11314  set WORK.TRANS_FORMULAVARS;
11315  by _FormulaNum;
11316  if INPUTROLE = 'TARGET' then output _target;
11317  if first._FormulaNum then do;
11318  if ^last._FormulaNum then do;
11319  INPUTNAME='';
11320  INPUTROLE='';
11321  INPUTTYPE='';
11322  INPUTREPORT='';
11323  end;
11324  output WORK.TRANS_FORMULAVARS;
11325  end;
11326  run;
 
NOTE: There were 3 observations read from the data set WORK.TRANS_FORMULAVARS.
NOTE: The data set WORK.TRANS_FORMULAVARS has 1 observations and 10 variables.
NOTE: The data set WORK._TARGET has 0 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11327  data _temp;
11328  set EMWS2.Trans4_FORMULA;
11329  _FormulaNum = _N_;
11330  run;
 
NOTE: There were 1 observations read from the data set EMWS2.TRANS4_FORMULA.
NOTE: The data set WORK._TEMP has 1 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11331  data WORK.TRANS_CODEFORMULA;
11332  length Name $32 Formula $300 Role $32 Level $10 REPORT $1;
11333  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel,  NOQUOTE))" FORMULA = "%sysfunc(sasmsg(sashelp.dmine, rpt_formula_vlabel,  NOQUOTE))" ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel,  NOQUOTE))" LEVEL =
11334     "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel,  NOQUOTE))" REPORT = "%sysfunc(sasmsg(sashelp.dmine, meta_report_vlabel,  NOQUOTE))" _targetFlag = "%sysfunc(sasmsg(sashelp.dmine, rpt_targetbased_vlabel,  NOQUOTE))" INPUTNAME =
11335     "%sysfunc(sasmsg(sashelp.dmine, rpt_inputname_vlabel,  NOQUOTE))" INPUTLEVEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_inputlevel_vlabel,  NOQUOTE))" INPUTROLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_inputrole_vlabel,  NOQUOTE))" INPUTTYPE =
11336     "%sysfunc(sasmsg(sashelp.dmine, rpt_inputtype_vlabel,  NOQUOTE))";
11337  drop _FormulaNum UNAME;
11338  _targetFlag = 0;
11339  merge _temp(in=_a) WORK.TRANS_FORMULAVARS(in=_b) _target(in=_c);
11340  by _FormulaNum;
11341  _targetFlag = 0;
11342  if _c then _targetFlag=1;
11343  if INPUT ne '' then if _a and ^_b then delete;
11344  if ROLE = '' then do;
11345  if INPUTROLE = '' then ROLE='INPUT';
11346  else ROLE = INPUTROLE;
11347  end;
11348  if REPORT = '' then do;
11349  if INPUTREPORT = '' then REPORT='N';
11350  else REPORT = INPUTREPORT;
11351  end;
11352  run;
 
NOTE: Variable INPUT is uninitialized.
NOTE: There were 1 observations read from the data set WORK._TEMP.
NOTE: There were 1 observations read from the data set WORK.TRANS_FORMULAVARS.
NOTE: There were 0 observations read from the data set WORK._TARGET.
NOTE: The data set WORK.TRANS_CODEFORMULA has 1 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11353  filename _code "\\filer.uncc.edu\home\hkatrag1\Predictive Analytics1\Workspaces\EMWS2\Trans4\FORMULAFLOWCODE.sas";
11354  data _null_;
11355  set WORK.TRANS_CODEFORMULA;
11356  file _code;
11357  if type eq 'C' and length > 0 then do;
11358  put 'length ' name ' $' length ';';
11359  end;
11360  if format ne '' then do;
11361  put 'format ' name format ';';
11362  end;
11363  length deqLabel $202;
11364  if label ne '' then do;
11365  deqlabel = tranwrd(label, '"', '""');
11366  put 'label ' name '="' deqlabel '";';
11367  end;
11368  if name ne '' and formula ne '' then do;
11369  put name '=' formula ';';
11370  end;
11371  run;
 
NOTE: The file _CODE is:
      Filename=\\filer.uncc.edu\home\hkatrag1\Predictive Analytics1\Workspaces\EMWS2\Trans4\FORMULAFLOWCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=12Dec2017:11:45:22,
      Create Time=12Dec2017:11:45:22
 
NOTE: 1 record was written to the file _CODE.
      The minimum record length was 112.
      The maximum record length was 112.
NOTE: There were 1 observations read from the data set WORK.TRANS_CODEFORMULA.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
11372  filename _code;
NOTE: Fileref _CODE has been deassigned.
 
11373  filename _code "\\filer.uncc.edu\home\hkatrag1\Predictive Analytics1\Workspaces\EMWS2\Trans4\FORMULAPUBLISHCODE.sas";
11374  data _null_;
11375  set WORK.TRANS_CODEFORMULA;
11376  file _code;
11377  if _targetFlag eq 0 then do;
11378  if type eq 'C' and length > 0 then do;
11379  put 'length ' name ' $' length ';';
11380  end;
11381  if format ne '' then do;
11382  put 'format ' name format ';';
11383  end;
11384  length deqLabel $202;
11385  if label ne '' then do;
11386  deqlabel = tranwrd(label, '"', '""');
11387  put 'label ' name '="' deqlabel '";';
11388  end;
11389  if name ne '' and formula ne '' then do;
11390  put name '=' formula ';';
11391  end;
11392  end;
11393  run;
 
NOTE: The file _CODE is:
      Filename=\\filer.uncc.edu\home\hkatrag1\Predictive Analytics1\Workspaces\EMWS2\Trans4\FORMULAPUBLISHCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=12Dec2017:11:45:22,
      Create Time=12Dec2017:11:45:22
 
NOTE: 1 record was written to the file _CODE.
      The minimum record length was 112.
      The maximum record length was 112.
NOTE: There were 1 observations read from the data set WORK.TRANS_CODEFORMULA.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
11394  filename _code;
NOTE: Fileref _CODE has been deassigned.
 
11395  filename _code "\\filer.uncc.edu\home\hkatrag1\Predictive Analytics1\Workspaces\EMWS2\Trans4\FORMULADELTACODE.sas";
11396  data _null_;
11397  set WORK.TRANS_CODEFORMULA;
11398  file _code;
11399  length String $200;
11400  if ROLE eq '' then ROLE = 'REJECTED';
11401  if REPORT eq '' then REPORT = 'N';
11402  String = 'if NAME="'!!strip(name)!!'" then do;';
11403  put / string;
11404  String = '   ROLE ="'!!strip(role)!!'";';
11405  put string;
11406  String = '   REPORT ="'!!strip(report)!!'";';
11407  put string;
11408  if LEVEL ne '' then do;
11409  String = '   LEVEL ="'!!strip(level)!!'";';
11410  put string;
11411  end;
11412  put 'end;';
11413  if INPUTNAME ne '' then do;
11414  String = 'if NAME="'!!strip(INPUTNAME)!!'" then delete;';
11415  put String;
11416  end;
11417  run;
 
NOTE: The file _CODE is:
      Filename=\\filer.uncc.edu\home\hkatrag1\Predictive Analytics1\Workspaces\EMWS2\Trans4\FORMULADELTACODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=12Dec2017:11:45:22,
      Create Time=12Dec2017:11:45:22
 
NOTE: 6 records were written to the file _CODE.
      The minimum record length was 0.
      The maximum record length was 22.
NOTE: There were 1 observations read from the data set WORK.TRANS_CODEFORMULA.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11418  filename _code;
NOTE: Fileref _CODE has been deassigned.
 
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this session.
11419  proc print data = EMWS2.Trans4_FORMULA(obs=500) noobs label;
11420  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_formulatransformations_title, NOQUOTE))";
11421  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_maxObsPrinted_title, NOQUOTE))";
11422  var Name ROLE LEVEL FORMULA;
11423  run;
 
NOTE: There were 1 observations read from the data set EMWS2.TRANS4_FORMULA.
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
11424  title9;
11425  title10;
 
11426  filename emflow "\\filer.uncc.edu\home\hkatrag1\Predictive Analytics1\Workspaces\EMWS2\Trans4\EMFLOWSCORE.sas";
11427  *------------------------------------------------------------*;
11428  * Trans4: Scoring DATA data;
11429  *------------------------------------------------------------*;
11430  data EMWS2.Trans4_TRAIN
11431  / view=EMWS2.Trans4_TRAIN
11432  ;
11433  set EMWS2.Trans3_TRAIN
11434  ;
11435  %inc emflow;
11440  run;
 
NOTE: DATA STEP view saved on file EMWS2.TRANS4_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS2.TRANS3_TRAIN.VIEW used (Total process time):
      real time           0.15 seconds
      cpu time            0.14 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.17 seconds
      cpu time            0.15 seconds
 
 
11441  quit;
11442  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
11443  *------------------------------------------------------------*;
11444  * Trans4: Computing metadata for TRAIN data;
11445  *------------------------------------------------------------*;
 
NOTE: View EMWS2.TRANS4_TRAIN.VIEW used (Total process time):
      real time           0.17 seconds
      cpu time            0.17 seconds
 
NOTE: View EMWS2.TRANS4_TRAIN.VIEW used (Total process time):
      real time           0.17 seconds
      cpu time            0.17 seconds
 
*------------------------------------------------------------*
* Report Log
Date:                December 12, 2017
Time:                11:45:20
*------------------------------------------------------------*
11815  *------------------------------------------------------------*;
11816  * &msgString;
11817  *------------------------------------------------------------*;
11818  filename _flowref "\\filer.uncc.edu\home\hkatrag1\Predictive Analytics1\Workspaces\EMWS2\Trans4\EMFLOWSCORE.sas";
11819  proc FCMP NOEXECUTE IMPUTEDDEPS OUTDEPS=WORK.TRANS_SCOREINPUTS;
11820  %INCLUDE _flowref;
11825  run;
 
NOTE: Dependency structure written to data set WORK.TRANS_SCOREINPUTS.
NOTE: PROCEDURE FCMP used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11826  quit;
11827  data WORK.TRANS_SCOREINPUTS;
11828  set WORK.TRANS_SCOREINPUTS(keep=RHS rename=(RHS=NAME));
11829  length UNAME $32;
11830  UNAME = upcase(NAME);
11831  run;
 
NOTE: There were 3 observations read from the data set WORK.TRANS_SCOREINPUTS.
NOTE: The data set WORK.TRANS_SCOREINPUTS has 3 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11832  proc sort data=WORK.TRANS_SCOREINPUTS NODUPKEY;
11833  by UNAME;
11834  run;
 
NOTE: There were 3 observations read from the data set WORK.TRANS_SCOREINPUTS.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set WORK.TRANS_SCOREINPUTS has 3 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11835  filename _flowref;
NOTE: Fileref _FLOWREF has been deassigned.
11836  %let SYSCC = 0;
11837  *------------------------------------------------------------*;
11838  * transformcombinevariables;
11839  *------------------------------------------------------------*;
11840  data WORK.TRANS_OUTPUTVARS;
11841  length Uname inputName $32 inputLevel $10 inputType $1 _MetaFlag 8;
11842  set
11843  EMWS2.Trans4_FORMULA
11844  ;
11845  _MetaFlag=0;
11846  uname = upcase(name);
11847  run;
 
NOTE: Variable inputName is uninitialized.
NOTE: Variable inputLevel is uninitialized.
NOTE: Variable inputType is uninitialized.
NOTE: There were 1 observations read from the data set EMWS2.TRANS4_FORMULA.
NOTE: The data set WORK.TRANS_OUTPUTVARS has 1 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11848  data _temp;
11849  length UNAME $32;
11850  set EMWS2.Trans4_CMeta_TRAIN(keep=NAME LEVEL ROLE TYPE CREATOR LABEL);
11851  UNAME = upcase(name);
11852  where upcase(CREATOR) = upcase("Trans4");
11853  run;
 
NOTE: There were 1 observations read from the data set EMWS2.TRANS4_CMETA_TRAIN.
      WHERE UPCASE(CREATOR)='TRANS4';
NOTE: The data set WORK._TEMP has 1 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11854  proc sort data=_temp(drop=CREATOR);
11855  by UNAME;
11856  run;
 
NOTE: There were 1 observations read from the data set WORK._TEMP.
NOTE: The data set WORK._TEMP has 1 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
11857  proc sort data=WORK.TRANS_OUTPUTVARS;
11858  by UNAME;
11859  run;
 
NOTE: There were 1 observations read from the data set WORK.TRANS_OUTPUTVARS.
NOTE: The data set WORK.TRANS_OUTPUTVARS has 1 observations and 22 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11860  data WORK.TRANS_OUTPUTVARS;
11861  merge WORK.TRANS_OUTPUTVARS _temp;
11862  by UNAME;
11863  run;
 
NOTE: There were 1 observations read from the data set WORK.TRANS_OUTPUTVARS.
NOTE: There were 1 observations read from the data set WORK._TEMP.
NOTE: The data set WORK.TRANS_OUTPUTVARS has 1 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11864  *------------------------------------------------------------*;
11865  * Trans4: Get Metadata for the Score Inputs Variables;
11866  *------------------------------------------------------------*;
11867  data _temp;
11868  length UNAME $32;
11869  set EMWS2.Trans4_VariableSet(keep=NAME LEVEL TYPE LABEL);
11870  UNAME = upcase(name);
11871  run;
 
NOTE: There were 28 observations read from the data set EMWS2.TRANS4_VARIABLESET.
NOTE: The data set WORK._TEMP has 28 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11872  proc sort data=_temp;
11873  by UNAME;
11874  run;
 
NOTE: There were 28 observations read from the data set WORK._TEMP.
NOTE: The data set WORK._TEMP has 28 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11875  data WORK.TRANS_SCOREINPUTS;
11876  merge WORK.TRANS_SCOREINPUTS(in=_a) _temp(in=_b);
11877  by UNAME;
11878  if _a and _b then output;
11879  run;
 
NOTE: There were 3 observations read from the data set WORK.TRANS_SCOREINPUTS.
NOTE: There were 28 observations read from the data set WORK._TEMP.
NOTE: The data set WORK.TRANS_SCOREINPUTS has 3 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11880  *------------------------------------------------------------*;
11881  * Trans4: Computing Summary Statistics;
11882  *------------------------------------------------------------*;
11883  proc dmdb data=EMWS2.Trans4_TRAIN classout=WORK.TRANS_CLASSSTATS varout=WORK.TRANS_VARSTATS;
11884  class
11885  PCTL_GiftCntAll
11886  PCTL_GiftTimeLast_REV
11887  PCTL_Monetary_TotalGiftAmount
11888  RFM
11889  ;
11890  ;
11891  run;
 
NOTE: Records processed = 9686   Memory used = 511K.
NOTE: There were 9686 observations read from the data set BIA.PVA97NK.
NOTE: There were 9686 observations read from the data set EMWS2.IDS_DATA.
NOTE: There were 9686 observations read from the data set EMWS2.TRANS_TRAIN.
NOTE: There were 9686 observations read from the data set EMWS2.TRANS2_TRAIN.
NOTE: View EMWS2.TRANS4_TRAIN.VIEW used (Total process time):
      real time           0.20 seconds
      cpu time            0.20 seconds
 
NOTE: There were 9686 observations read from the data set EMWS2.TRANS3_TRAIN.
NOTE: There were 9686 observations read from the data set EMWS2.TRANS4_TRAIN.
NOTE: The data set WORK.TRANS_CLASSSTATS has 131 observations and 9 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.21 seconds
      cpu time            0.21 seconds
 
 
11892  *------------------------------------------------------------*;
11893  * Trans4: Combine Information and Statistics for Class Variables;
11894  *------------------------------------------------------------*;
11895  proc sort data=WORK.TRANS_OUTPUTVARS out=_temp;
11896  by NAME;
11897  run;
 
NOTE: There were 1 observations read from the data set WORK.TRANS_OUTPUTVARS.
NOTE: The data set WORK._TEMP has 1 observations and 22 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11898  proc sort data=WORK.TRANS_CLASSSTATS;
11899  by NAME;
11900  run;
 
NOTE: There were 131 observations read from the data set WORK.TRANS_CLASSSTATS.
NOTE: The data set WORK.TRANS_CLASSSTATS has 131 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11901  data WORK.TRANS_CLASSSTATS(keep=name nlevel nmiss);
11902  retain nlevel nmiss;
11903  set WORK.TRANS_CLASSSTATS;
11904  by Name;
11905  if first.Name then do;
11906  nlevel= 0;
11907  nmiss= 0;
11908  end;
11909  if (type='C' and CRAW='') or (type='N' and NRAW=.) then nmiss = FREQUENCY;
11910  else nlevel + 1;
11911  if last.name then output;
11912  run;
 
NOTE: There were 131 observations read from the data set WORK.TRANS_CLASSSTATS.
NOTE: The data set WORK.TRANS_CLASSSTATS has 4 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11913  /*Merge Statistics for Class Output Vars */
11914  data WORK.TRANS_CLASSSTATS;
11915  length SOURCE $6 _METHOD_ $8 NAME $32 FORMULA $300;
11916  merge WORK.TRANS_CLASSSTATS(in=_a) _temp(in=_b keep=NAME InputName Formula _MetaFlag LEVEL TYPE LABEL);
11917  by NAME;
11918  if _a and _b then do;
11919  SOURCE='Output';
11920  if _MetaFlag = 1 then _METHOD_="Meta";
11921  else if Formula eq 'Interaction' then _METHOD_="Computed";
11922  else if inputName eq '' then _METHOD_="Formula";
11923  else _METHOD_="Computed";
11924  if Formula = '' then Formula = "User Code";
11925  end;
11926  if _a then output;
11927  drop inputName LEVEL TYPE _MetaFlag;
11928  run;
 
NOTE: There were 4 observations read from the data set WORK.TRANS_CLASSSTATS.
NOTE: There were 1 observations read from the data set WORK._TEMP.
NOTE: The data set WORK.TRANS_CLASSSTATS has 4 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11929  /*Merge Statistics for Class Input Vars */
11930  proc sort data=WORK.TRANS_SCOREINPUTS(drop=TYPE LEVEL) out=_temp nodupkey;
11931  by NAME;
11932  run;
 
NOTE: There were 3 observations read from the data set WORK.TRANS_SCOREINPUTS.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set WORK._TEMP has 3 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11933  data WORK.TRANS_CLASSSTATS;
11934  merge WORK.TRANS_CLASSSTATS(in=_a) _temp(in=_b);
11935  by NAME;
11936  if _a and _b then do;
11937  SOURCE='Input';
11938  _METHOD_="Original";
11939  end;
11940  if _a then output;
11941  run;
 
NOTE: There were 4 observations read from the data set WORK.TRANS_CLASSSTATS.
NOTE: There were 3 observations read from the data set WORK._TEMP.
NOTE: The data set WORK.TRANS_CLASSSTATS has 4 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11942  *------------------------------------------------------------*;
11943  * Trans4: Combine Information and Statistics for Interval Variables;
11944  *------------------------------------------------------------*;
11945  proc sort data=WORK.TRANS_OUTPUTVARS out=_temp;
11946  by NAME;
11947  run;
 
NOTE: There were 1 observations read from the data set WORK.TRANS_OUTPUTVARS.
NOTE: The data set WORK._TEMP has 1 observations and 22 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11948  proc sort data=WORK.TRANS_VARSTATS;
11949  by NAME;
11950  run;
 
NOTE: Input data set is empty.
NOTE: The data set WORK.TRANS_VARSTATS has 0 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11951  *Merge Statistics for Output Vars;
11952  data WORK.TRANS_VARSTATS;
11953  length SOURCE $6 _METHOD_ $8 NAME $32 FORMULA $300;
11954  merge WORK.TRANS_VARSTATS(in=_a) _temp(in=_b keep=NAME Formula InputName _MetaFlag LEVEL TYPE LABEL);
11955  by NAME;
11956  if _a and _b then do;
11957  SOURCE='Output';
11958  if _MetaFlag = 1 then _METHOD_="Meta";
11959  else if Formula eq 'Interaction' then _METHOD_="Computed";
11960  else if inputName eq '' then _METHOD_="Formula";
11961  else _METHOD_="Computed";
11962  if Formula = '' then Formula = "Mixture of variables";
11963  end;
11964  if _a then output;
11965  drop inputName LEVEL TYPE _MetaFlag;
11966  run;
 
NOTE: There were 0 observations read from the data set WORK.TRANS_VARSTATS.
NOTE: There were 1 observations read from the data set WORK._TEMP.
NOTE: The data set WORK.TRANS_VARSTATS has 0 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11967  *Merge Statistics for Input Vars;
11968  proc sort data=WORK.TRANS_SCOREINPUTS(drop=TYPE LEVEL) out=_temp nodupkey;
11969  by NAME;
11970  run;
 
NOTE: There were 3 observations read from the data set WORK.TRANS_SCOREINPUTS.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set WORK._TEMP has 3 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11971  data WORK.TRANS_VARSTATS;
11972  merge WORK.TRANS_VARSTATS(in=_a) _temp(in=_b);
11973  by NAME;
11974  if _a and _b then do;
11975  SOURCE='Input';
11976  _METHOD_="Original";
11977  end;
11978  if _a then output;
11979  run;
 
NOTE: There were 0 observations read from the data set WORK.TRANS_VARSTATS.
NOTE: There were 3 observations read from the data set WORK._TEMP.
NOTE: The data set WORK.TRANS_VARSTATS has 0 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11980  *------------------------------------------------------------*;
11981  * Trans4: Combine statistics for class and interval variables;
11982  *------------------------------------------------------------*;
11983  data EMWS2.Trans4_STATISTICS;
11984  length SOURCE $6 _METHOD_ $8 NAME $32 FORMULA $300;
11985  label SOURCE = "%sysfunc(sasmsg(sashelp.dmine, rpt_source_vlabel,  NOQUOTE))" _METHOD_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_method_vlabel,  NOQUOTE))" NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel,  NOQUOTE))" FORMULA =
11986     "%sysfunc(sasmsg(sashelp.dmine, rpt_formula_vlabel,   NOQUOTE))" NLEVEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_numcat_vlabel,   NOQUOTE))" N = "%sysfunc(sasmsg(sashelp.dmine, rpt_nonmiss_vlabel, NOQUOTE))" NMISS =
11987     "%sysfunc(sasmsg(sashelp.dmine, rpt_missing_vlabel, NOQUOTE))" MIN = "%sysfunc(sasmsg(sashelp.dmine, rpt_minimum_vlabel, NOQUOTE))" MAX = "%sysfunc(sasmsg(sashelp.dmine, rpt_maximum_vlabel, NOQUOTE))" MEAN =
11988     "%sysfunc(sasmsg(sashelp.dmine, rpt_mean_vlabel,    NOQUOTE))" STD = "%sysfunc(sasmsg(sashelp.dmine, rpt_std_vlabel,     NOQUOTE))" SKEWNESS = "%sysfunc(sasmsg(sashelp.dmine, rpt_skewness_vlabel, NOQUOTE))" KURTOSIS =
11989     "%sysfunc(sasmsg(sashelp.dmine, rpt_kurtosis_vlabel, NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, NOQUOTE))";
11990  set
11991  WORK.TRANS_CLASSSTATS
11992  WORK.TRANS_VARSTATS
11993  ;
11994  drop UNAME;
11995  run;
 
NOTE: There were 4 observations read from the data set WORK.TRANS_CLASSSTATS.
NOTE: There were 0 observations read from the data set WORK.TRANS_VARSTATS.
NOTE: The data set EMWS2.TRANS4_STATISTICS has 4 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
 
11996  proc sort data=EMWS2.Trans4_STATISTICS;
11997  by SOURCE _METHOD_ NAME;
11998  run;
 
NOTE: There were 4 observations read from the data set EMWS2.TRANS4_STATISTICS.
NOTE: The data set EMWS2.TRANS4_STATISTICS has 4 observations and 14 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
 
 
11999  proc sort data = EMWS2.Trans4_STATISTICS NOTHREADS;
12000  by SOURCE NAME;
12001  run;
 
NOTE: There were 4 observations read from the data set EMWS2.TRANS4_STATISTICS.
NOTE: The data set EMWS2.TRANS4_STATISTICS has 4 observations and 14 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
 
 
12002  title9 ' ';
12003  proc print data = EMWS2.Trans4_STATISTICS(obs=500) noobs label;
12004  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_intervalinputStats_title, NOQUOTE))";
12005  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_maxObsPrinted_title, NOQUOTE))";
12006  var Name NMISS MIN MAX MEAN STD SKEWNESS KURTOSIS;
12007  where SOURCE eq 'INPUT' and mean ne .;
12008  run;
 
NOTE: No observations were selected from data set EMWS2.TRANS4_STATISTICS.
NOTE: There were 0 observations read from the data set EMWS2.TRANS4_STATISTICS.
      WHERE (SOURCE='INPUT') and (mean not = .);
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12009  proc print data = EMWS2.Trans4_STATISTICS(obs=500) noobs label;
12010  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_intervaloutputStats_title, NOQUOTE))";
12011  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_maxObsPrinted_title, NOQUOTE))";
12012  var Name _METHOD_ NMISS MIN MAX MEAN STD SKEWNESS KURTOSIS;
12013  where SOURCE eq 'OUTPUT' and mean ne .;
12014  run;
 
NOTE: No observations were selected from data set EMWS2.TRANS4_STATISTICS.
NOTE: There were 0 observations read from the data set EMWS2.TRANS4_STATISTICS.
      WHERE (SOURCE='OUTPUT') and (mean not = .);
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12015  proc print data = EMWS2.Trans4_STATISTICS(obs=500) noobs label;
12016  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_classinputStats_title, NOQUOTE))";
12017  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_maxObsPrinted_title, NOQUOTE))";
12018  var Name NLEVEL NMISS;
12019  where SOURCE eq 'INPUT' and nlevel ne .;
12020  run;
 
NOTE: No observations were selected from data set EMWS2.TRANS4_STATISTICS.
NOTE: There were 0 observations read from the data set EMWS2.TRANS4_STATISTICS.
      WHERE (SOURCE='INPUT') and (nlevel not = .);
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12021  proc print data = EMWS2.Trans4_STATISTICS(obs=500) noobs label;
12022  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_classoutputStats_title, NOQUOTE))";
12023  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_maxObsPrinted_title, NOQUOTE))";
12024  var Name _METHOD_ NLEVEL NMISS;
12025  where SOURCE eq 'OUTPUT' and nlevel ne .;
12026  run;
 
NOTE: No observations were selected from data set EMWS2.TRANS4_STATISTICS.
NOTE: There were 0 observations read from the data set EMWS2.TRANS4_STATISTICS.
      WHERE (SOURCE='OUTPUT') and (nlevel not = .);
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12027  title9;
12028  title10;
 
12029  data EMWS2.Trans4_EMSCOREVAR;
12030  length Name $32 formula $300 file $200;
12031  keep NAME Formula file;
12032  set EMWS2.Trans4_STATISTICS;
12033  where SOURCE='Output';
12034  select( _METHOD_);
12035  when('Computed') do;
12036  file="TRANSFORMCODE\"!!strip(NAME)!!'.sas';
12037  formula = '';
12038  end;
12039  when('Formula') do;
12040  if Formula eq 'Mixture of variables' then do;
12041  file= "EDITORCODE.sas";
12042  formula = '';
12043  end;
12044  if Formula = 'User Code' then do;
12045  file= "EDITORCODE.sas";
12046  formula = '';
12047  end;
12048  end;
12049  otherwise;
12050  end;
12051  output;
12052  run;
 
NOTE: There were 1 observations read from the data set EMWS2.TRANS4_STATISTICS.
      WHERE SOURCE='Output';
NOTE: The data set EMWS2.TRANS4_EMSCOREVAR has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
